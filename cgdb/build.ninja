includes = -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include
libs = -lgobject-2.0 -lglib-2.0 

cflags = -Wall -Werror $includes
cxxflags = $cflags

ldflags = $libs

rule cc
  depfile = $out.d
  command = gcc -MMD -MF $out.d $cflags -c $in -o $out

rule cxx
  depfile = $out.d
  command = g++ -MMD -MF $out.d $cxxflags -c $in -o $out

rule link
  command = g++ $ldflags $in -o $out

build main.o: cxx main.cc

build main_loop.o: cxx main_loop.cc

build cgdb: link main.o main_loop.o

